<%- config = @directives %>
;
; Generated by Chef
; Local modifications will be overwritten.
;

[PHP]

;;;;;;;;;;;;;;;;;;;;
; Language Options ;
;;;;;;;;;;;;;;;;;;;;

engine                           = On
short_open_tag                   = On
asp_tags                         = Off
precision                        = 14
y2k_compliance                   = On
output_buffering                 = 4096
zlib.output_compression          = Off
implicit_flush                   = Off
unserialize_callback_func        =
serialize_precision              = 100
allow_call_time_pass_reference   = Off
safe_mode                        = Off
safe_mode_gid                    = Off
safe_mode_include_dir            =
safe_mode_exec_dir               =
safe_mode_allowed_env_vars       = PHP_
safe_mode_protected_env_vars     = LD_LIBRARY_PATH
disable_functions                =
disable_classes                  =

;;;;;;;;;;;;;;;;;
; Miscellaneous ;
;;;;;;;;;;;;;;;;;

expose_php = <%= config['expose_php'] %>

;;;;;;;;;;;;;;;;;;;
; Resource Limits ;
;;;;;;;;;;;;;;;;;;;

max_execution_time     = <%= config['max_execution_time'] %>
max_input_time         = <%= config['max_input_time'] %>
max_input_vars         = <%= config['max_input_vars'] %>
memory_limit           = <%= config['memory_limit'] %>

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Error handling and logging ;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

error_reporting            = <%= config['error_reporting'] %>
display_errors             = <%= config['display_errors'] %>
display_startup_errors     = Off
log_errors                 = On
log_errors_max_len         = 1024
ignore_repeated_errors     = Off
ignore_repeated_source     = Off
report_memleaks            = On
track_errors               = Off
html_errors                = <%= config['html_errors'] %>
<% unless config['error_log'].empty? %>
error_log                  = <%= config['error_log'] %>
<% end %>

;;;;;;;;;;;;;;;;;
; Data Handling ;
;;;;;;;;;;;;;;;;;

variables_order           = "GPCS"
request_order             = "GP"
register_globals          = Off
register_long_arrays      = Off
register_argc_argv        = Off
auto_globals_jit          = On
magic_quotes_gpc          = Off
magic_quotes_runtime      = Off
magic_quotes_sybase       = Off
auto_prepend_file         =
auto_append_file          =
default_mimetype          = "text/html"

;;;;;;;;;;;;;;;;;;;;;;;;;
; Paths and Directories ;
;;;;;;;;;;;;;;;;;;;;;;;;;

doc_root          =
user_dir          =
enable_dl         = Off
cgi.fix_pathinfo  = <%= config['cgi_fix_pathinfo'] %>

;;;;;;;;;;;;;;;;
; File Uploads ;
;;;;;;;;;;;;;;;;

file_uploads         = On
upload_max_filesize  = <%= config['upload_max_filesize'] %>
post_max_size        = <%= config['post_max_size'] %>

;;;;;;;;;;;;;;;;;;
; Fopen wrappers ;
;;;;;;;;;;;;;;;;;;

allow_url_fopen         = On
allow_url_include       = Off
default_socket_timeout  = <%= config['default_socket_timeout'] %>

;;;;;;;;;;;;;;;;;;;
; Module Settings ;
;;;;;;;;;;;;;;;;;;;

[Date]
date.timezone = <%= config['date.timezone'] %>

[Syslog]
define_syslog_variables  = Off

[mail function]
SMTP                  = localhost
smtp_port             = 25
sendmail_path         = /usr/sbin/sendmail -t -i
mail.add_x_header     = On

[SQL]
sql.safe_mode = Off

[MySQL]
mysql.allow_persistent   = On
mysql.max_persistent     = -1
mysql.max_links          = -1
mysql.default_port       =
mysql.default_socket     =
mysql.default_host       =
mysql.default_user       =
mysql.default_password   =
mysql.connect_timeout    = 60
mysql.trace_mode         = Off

[MySQLi]
mysqli.max_links        = -1
mysqli.default_port     = 3306
mysqli.default_socket   =
mysqli.default_host     =
mysqli.default_user     =
mysqli.default_pw       =
mysqli.reconnect        = Off

[mysqlnd]
mysqlnd.collect_statistics = Off
mysqlnd.collect_memory_statistics = Off
mysqlnd.net_cmd_buffer_size = 2048
mysqlnd.net_read_buffer_size = 32768

[bcmath]
bcmath.scale = 0

[Session]
session.save_handler            = files
session.save_path               = "<%= node['php_wrapper']['session']['save_path'] %>"
session.use_cookies             = 1
session.use_only_cookies        = 1
session.name                    = PHPSESSID
session.auto_start              = 0
session.cookie_lifetime         = 0
session.cookie_path             = /
session.cookie_domain           =
session.cookie_httponly         =
session.serialize_handler       = php
session.gc_probability          = 1
session.gc_divisor              = 1000
session.gc_maxlifetime          = 1440
session.bug_compat_42           = Off
session.bug_compat_warn         = Off
session.referer_check           =
session.entropy_length          = 0
session.entropy_file            =
session.cache_limiter           = nocache
session.cache_expire            = 180
session.use_trans_sid           = 0
session.hash_function           = 0
session.hash_bits_per_character = 5
url_rewriter.tags               = "a=href,area=href,frame=src,input=src,form=fakeentry"

[Suhosin]
suhosin.executor.include.whitelist = phar

[Tidy]
tidy.clean_output         = Off

[soap]
soap.wsdl_cache_enabled    = 1
soap.wsdl_cache_dir        = "/tmp"
soap.wsdl_cache_ttl        = 86400

[opcache]
opcache.enable                  = <%= config['opcache.enable'] %>
opcache.enable_cli              = "Off"
opcache.memory_consumption      = <%= config['opcache.memory_consumption'] %>
opcache.max_files               = <%= config['opcache.max_accelerated_files'] %>

<% config['custom'].each do |key, value| %>
<%= key %> = <%= value %>
<% end %>
